<AddIn name        = "AvalonEdit.AddIn"
       author      = "Daniel Grunwald"
       description = "The main text editor for SharpDevelop"
       addInManagerHidden="preinstalled">
	
	<Manifest>
		<Identity name="ICSharpCode.AvalonEdit" />
	</Manifest>
	
	<Runtime>
		<Import assembly = ":ICSharpCode.AvalonEdit"/>
		<Import assembly = "ICSharpCode.AvalonEdit.AddIn.dll"/>
	</Runtime>
	
	<Path name = "/SharpDevelop/Workbench/DisplayBindings">
		<DisplayBinding id = "Text"
		                title = "${res:Gui.ProjectBrowser.OpenWith.Bindings.TextEditor} (AvalonEdit)"
		                class = "ICSharpCode.AvalonEdit.AddIn.AvalonEditDisplayBinding"/>
	</Path>
	
	<Path name = "/SharpDevelop/ViewContent/AvalonEdit/ContextMenu">
		<Include id="DefaultEditor" path="/SharpDevelop/ViewContent/TextEditor/ContextMenu"/>
	</Path>
	
	<Path name = "/SharpDevelop/Workbench/MainMenu/Edit/Format">
		<Condition name = "WindowActive" activewindow="ICSharpCode.SharpDevelop.Editor.ITextEditorProvider" action="Disable">
			<MenuItem id = "RemoveLeadingWs"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.RlWs}"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.RemoveLeadingWhitespace"/>
			<MenuItem id = "RemoveTrailingWs"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.RtWs}"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.RemoveTrailingWhitespace"/>
			<MenuItem id = "Seperator1" type = "Separator" />
			<MenuItem id = "UpperCase"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.UpperCase}"
			          icon = "Icons.16x16.LowerToUpperCase"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.ConvertToUppercase"/>
			<MenuItem id = "LowerCase"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.LowerCase}"
			          icon = "Icons.16x16.UpperToLowerCase"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.ConvertToLowercase"/>
			<MenuItem id = "Capitalize"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.Capitalize}"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.ConvertToTitleCase"/>
			<MenuItem id = "InvertCase"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.InvertCase}"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.InvertCase"/>
			<MenuItem id = "Separator2" type = "Separator" />
			<MenuItem id = "SortSelection"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.SortLines}"
			          class ="ICSharpCode.SharpDevelop.Editor.Commands.SortSelection"/>
			<MenuItem id = "Separator3" type = "Separator" />
			<MenuItem id = "Tabs2Spaces"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.Tab2Space}"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.ConvertTabsToSpaces"/>
			<MenuItem id = "Spaces2Tabs"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.Space2Tab}"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.ConvertSpacesToTabs"/>
			<MenuItem id = "LeadingTabs2Spaces"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.LdTab2Space}"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.ConvertLeadingTabsToSpaces"/>
			<MenuItem id = "LeadingSpaces2Tabs"
			          label = "${res:XML.MainMenu.EditMenu.FormatMenu.LdSpace2Tab}"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.ConvertLeadingSpacesToTabs"/>
			<MenuItem id = "Separator4" type = "Separator" />
			<MenuItem id = "Comment"
			          icon = "Icons.16x16.CommentRegion"
			          label = "${res:XML.TextAreaContextMenu.CommentUncommentSelection}"
			          class = "ICSharpCode.SharpDevelop.Editor.Commands.CommentRegion"/>
			<MenuItem id = "Indent"
			          label = "${res:XML.TextAreaContextMenu.Indent}"
			          shortcut = "Ctrl+I"
			          command = "ICSharpCode.AvalonEdit.AvalonEditCommands.IndentSelection"/>
		</Condition>
	</Path>
</AddIn>
